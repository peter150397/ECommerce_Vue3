import{a as g,r as h,o as r,c as s,g as m,b as t,F as p,i as _,t as l,k as y,p as P,e as L}from"./index-527a84c7.js";import{P as b,L as k}from"./Pagination-ab02d354.js";import{_ as x}from"./plugin-vueexport-helper-c27b6911.js";const D={data(){return{orders:[],products:[],pagination:{},isLoading:!1}},components:{Pagination:b,Loading:k},methods:{getOrderList(e=1){const n=`https://vue-course-api.hexschool.io/api/peterapi/orders?page=${e}`,a=this;a.isLoading=!0,g.get(n).then(i=>{a.orders=i.data.orders,a.pagination=i.data.pagination,a.isLoading=!1})},getProducts(){const e="https://vue-course-api.hexschool.io/api/peterapi/products/all",n=this;g.get(e).then(a=>{n.products=a.data.products})},findProductById(e){return this.products.find(i=>{if(e===i.id)return!0})},getDate(e){let n=new Date(e*1e3),a=n.getFullYear(),i=n.getMonth()+1,c=n.getDate();return`${a}/${i}/${c}`},currencyFilter(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"NTD"}).format(e)}},created(){this.getOrderList(),this.getProducts()}},I=e=>(P("data-v-b6580502"),e=e(),L(),e),B={class:"table mt-4 table-hover align-middle"},F=I(()=>t("thead",null,[t("tr",null,[t("th",null,"購買時間"),t("th",null,"Email"),t("th",{style:{width:"50%"}},"購買項目"),t("th",null,"購買數量"),t("th",null,"應付金額"),t("th",null,"是否付款")])],-1)),N={class:"text-right"},S={key:0,class:"is_paid"},w={key:1,class:"not_paid"};function $(e,n,a,i,c,u){const f=h("loading"),v=h("Pagination");return r(),s("div",null,[m(f,{active:c.isLoading},null,8,["active"]),t("table",B,[F,t("tbody",null,[(r(!0),s(p,null,_(c.orders,o=>(r(),s("tr",{key:o.id},[t("td",null,l(u.getDate(o.create_at)),1),t("td",null,l(o.user.email),1),t("td",null,[(r(!0),s(p,null,_(o.products,d=>(r(),s("p",{key:d.id},l(u.findProductById(d.product_id).title),1))),128))]),t("td",null,[(r(!0),s(p,null,_(o.products,d=>(r(),s("p",{key:d.id},l(d.qty)+" "+l(u.findProductById(d.product_id).unit),1))),128))]),t("td",null,[t("p",N,l(u.currencyFilter(o.total)),1)]),t("td",null,[o.is_paid?(r(),s("span",S,"已付款")):y("",!0),o.is_paid?y("",!0):(r(),s("span",w,"未付款"))])]))),128))])]),m(v,{pagination:c.pagination,onGetData:u.getOrderList},null,8,["pagination","onGetData"])])}const E=x(D,[["render",$],["__scopeId","data-v-b6580502"]]);export{E as default};
